<!DOCTYPE html>
<html lang="en">
<head>
	<title>Cryptocurrency - Landing Page Template</title>
	<meta charset="UTF-8">
	<meta name="description" content="Cryptocurrency Landing Page Template">
	<meta name="keywords" content="cryptocurrency, unica, creative, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Favicon -->
	<link href="img/favicon.ico" rel="shortcut icon"/>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/themify-icons.css"/>
	<link rel="stylesheet" href="css/animate.css"/>
	<link rel="stylesheet" href="css/owl.carousel.css"/>
	<link rel="stylesheet" href="css/style.css"/>


	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	<!--====== Javascripts & Jquery ======-->
	<!-- <script src="js/jquery-3.2.1.min.js"></script> -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/main.js"></script>
	<script type="text/javascript">
		function processImage() {
	
			// **********************************************
			// *** Update or verify the following values. ***
			// **********************************************
	
			// Replace <Subscription Key> with your valid subscription key.
			var subscriptionKey = "101a8ada5bf345ed9c62e9fc8bc86503";
	
			// You must use the same region in your REST call as you used to get your
			// subscription keys. For example, if you got your subscription keys from
			// westus, replace "westcentralus" in the URI below with "westus".
			//
			// Free trial subscription keys are generated in the westcentralus region.
			// If you use a free trial subscription key, you shouldn't need to change
			// this region.
			var uriBase =
				"https://westcentralus.api.cognitive.microsoft.com/vision/v2.0/analyze";
	
			// Request parameters.
			var params = {
				"visualFeatures": "Categories,Description,Color",
				"details": "",
				"language": "en",
			};
	
			// Display the image.
			var sourceImageUrl = document.getElementById("inputImage").value;
			console.log(sourceImageUrl)
			document.querySelector("#sourceImage").src = sourceImageUrl;

	
			// Make the REST API call.
			$.ajax({
				url: uriBase + "?" + $.param(params),
	
				// Request headers.
				beforeSend: function(xhrObj){
					xhrObj.setRequestHeader("Content-Type","application/json");
					
					xhrObj.setRequestHeader(
						"Ocp-Apim-Subscription-Key", subscriptionKey);
						
				},
	
				type: "POST",
	
				// Request body.
				data: '{"url": ' + '"' + sourceImageUrl + '"}',
			})
	
			.done(function(data) {
				// Show formatted JSON on webpage.
				
				var teste = JSON.stringify(data, null, 2);
				var testeToJson = $.parseJSON(teste);
				
				//console.log(testeToJson);
				//console.log(testeToJson.categories[0].name);
				//console.log(testeToJson.description.captions[0].text);
				//console.log(testeToJson.description.tags);
	
				var nivelConfiabilidade = testeToJson.description.captions[0].confidence
	
				$('#imageDiv').append("<div class='col-md-20'><h1>" + testeToJson.description.captions[0].text + "</h1>");

				$('#imageDiv').append("<a>"+ testeToJson.description.tags.slice(-17)+"<br><br></a>")
	
				// $('#imageDiv').append("<p>" + testeToJson.description.tags.slice(-17) + "</p>");
	
				$('#metadata').append("<h2>" + testeToJson.metadata.format + "</h2></div>");
				
	
				if(testeToJson.categories[0].detail){
					if(testeToJson.categories[0].detail.celebrities.length >0){
					$('#imageDiv').append("<img src='img/celebridade-icone.png'/>");
				};
				};
	
				 $('#imageDiv').append("Metadados:");
	
				if(testeToJson.metadata.format == "Jpeg"){
					$('#imageDiv').append("<img src='img/jpeg.png'/>");
					
				}else if (testeToJson.metadata.format == "Jpg"){
					$('#imageDiv').append("<img src='img/jpg.png'/>");
				}else if(testeToJson.metadata.format == "Png"){
					$('#imageDiv').append("<img src='img/png.png'/>");
				}
	
			   
	
				$('#imageDiv').append("<img src='img/largura.png'/>" + testeToJson.metadata.width + "px");
				$('#imageDiv').append("<img src='img/altura.png'/>" + testeToJson.metadata.height + "px");
	
				var ctx = document.getElementById("myChart").getContext('2d');
	
	
				var myChart = new Chart(ctx, {
					type: 'bar',
					data: {
						labels: ["Confiável", "Não Confiável"],
						datasets: [{
							label: '# Confiabilidade das informações',
							data: [nivelConfiabilidade, 1-nivelConfiabilidade],
							backgroundColor: [
								'rgba(0,255,0, 0.5)',
								'rgba(66,66,111)'
							],
							borderColor: [
								'rgba(0,255,0,1)',
								'rgba(54, 162, 235, 1)'
							],
							borderWidth: 1
						}]
					},
					options: {
						scales: {
							yAxes: [{
								ticks: {
									beginAtZero:true,
								}
							}]
						}
					}
				});
	
				$("#responseTextArea").val(JSON.stringify(data, null, 2));
			})
	
			.fail(function(jqXHR, textStatus, errorThrown) {
				// Display error message.;
				var errorString = (errorThrown === "") ? "Error. " :
					errorThrown + " (" + jqXHR.status + "): ";
				errorString += (jqXHR.responseText === "") ? "" :
					jQuery.parseJSON(jqXHR.responseText).message;
				alert(errorString);
			});
		
		};
	</script>

</head>
<body>
	<!-- Header section -->
	<header class="header-section clearfix">
		<div class="container-fluid">
			<a href="index.html" class="site-logo">
				<img src="img/logo.png" alt="">
			</a>
			<div class="responsive-bar"><i class="fa fa-bars"></i></div>
			<a href="" class="user"><i class="fa fa-user"></i></a>
			<!-- <a href="" class="site-btn">Sign Up Free</a> -->
			<nav class="main-menu">
				<ul class="menu-list">
					<li><a href="" class="site-btn">Sobre Nós</a></li>
					<li><a href="" class="site-btn">Contato</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<!-- Header section end -->


	<!-- Hero section -->
	<section class="hero-section">
		<div class="container">
			<div class="row">
				<div id="imageDiv" class="col-md-6 hero-text">
					<h2>Insira sua <span>Imagem</span> <br>abaixo:</h2>
					<h4>Use de preferencia formatos JPG/PNG<br> e imagens maiores que 50x50</h4>
					<form class="hero-subscribe-from">
						<input type="text" name="inputImage" id="inputImage" placeholder="Cole aqui o Link da Imagem">
						<button type="button" id="btn-teste" onclick="processImage()" class="site-btn sb-gradients">Enviar</button>
					</form>
				</div>
				<div class="col-md-6">
					<img class="col-md-25" width="400" height="400" alt"Imagem Escolhida "src="" id="sourceImage" width="400"/>
					<canvas class='col-md-18' style="padding-left: 20%; font-size: 40px; margin-left: 20%;" id="myChart"></canvas>
				</div>
			</div>
		</div>
	</section>

</body>
</html>
